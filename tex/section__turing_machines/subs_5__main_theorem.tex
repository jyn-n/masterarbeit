To conclude this chapter we prove a theorem about Turing machines which allows us to use certain classes of Turing machines interchangeably, a feature which becomes important later on.
\begin{Theorem}
	For every Turing machine $M$ on one tape (i.e. $n(M) = 1$), there is a foolproof readonly Turing machine $N$ on two tapes such that
	there is a computable map $f: IC(M) \to C(N)$
	satisfying \IM{f(AC(M)) = AC(N)}.
\end{Theorem}
\proof
	Let $M$ be a Turing machine on one tape.
	We first construct the map $f$ to get an idea what $N$ is supposed to do and then construct $N$ itself.
	But to define $f$ we have to know what $C(N)$ looks like.
	The state-part of $f(c)$ should always be \INI. Therefore it suffices for now to define $A(N)$:
	\begin{align*}
		A(N) := (A(M) \times \{0,1\} \times \{0,1\})~\dot\cup~S(M)~\dot\cup~\{|\}~\dot\cup~\{\EMP\}
	\end{align*}
	Think of a symbol $a \in A(N)$ as either a state or a symbol of $M$, or the ``separator'' symbol $|$.
	If $a$ happens to be a symbol of $M$ it might or might not be ``marked'' in two different ways.
	The first marking should be interpreted as ``position $0$'', the second marking means ``new position''
	and for $a \in A(M)$ we will write
	$\underline{a}$, $\boldsymbol{a}$ and $\underline{\boldsymbol{a}}$ for position $0$-$a$, new position $a$ and new position $0$-$a$ (i.e. $(a,1,0)$, $(a,0,1)$ and $(a,1,1)$) respectively.

	Thus a finite configuration $c \in FC(M)$ may be interpreted as a word over this alphabet:
	The first symbol is the state of $c$. The following symbols are the (mostly) non-\EMP-part of the tape with the symbol at index $0$ underlined.

	Similarly a word over $A(N)$ might denote a sequence of configurations by containing each of those configurations separated by $|$.

	Now we define the tape-part of $f(c)$ to be the word
	\begin{align*}
		c~|~T(c)~|~T^2(c)~|~...~|~T^k(c)
	\end{align*}
	if $T^k(c) = T^{k+1}(c)$ and the respective infinitely long word otherwise (note that every single configuration is still finite).

	There is some ambiguity in this definition as it is not clear exactly how many \EMP-symbols should be in a given configuration.
	This we resolve thus: $c$ itself should be as short as possible, that is it contains the underlined symbol, all non-\EMP-symbols and any \EMP~in between, but no more.
	Two consecutive configurations should have the same length if possible. If not, the second configuration may be one symbol longer.
	This occurs if the underlined symbol is rightmost (or leftmost) and $T_{direction}$ is $1$ (or $-1$).
	In this and only this case, the underlined symbol in the second configuration should be bold (i.e. marked as new position).

	Now we are ready to define the Turing machine $N$ itself. This we do in several stages. The first one checks if
	\begin{itemize}
		\item { Both tapes are equal (in an area bordered by \EMP~around $0$). }
		\item { The tapes contain a sequence of words, each terminated by $|$. }
		\item { Each of those words is a configuration. That is it starts with a state and every other symbol is from the alphabet of $M$, with exactly one symbol underlined. }
		\item { if a symbol is bold it is also underlined and either the first or last symbol of the tape part of a configuration }
	\end{itemize}
	It does not yet check that the lengths of two consecutive configurations differ by at most one.

	The set of states of this first stage is $\{\INI,\ACC,\REJ,1,2,3,4,4^\prime\}$.
	$T_{direction}(c)$ is 1 for both tapes, unless $T_{state}(c) \in \STOPS$, in which case it is 0. $T_{write}$ is determined by the readonly-property.

	$T_{state}$ can be seen in figure \ref{turing_machines:main_theorem:fig_stage1}:
	For some configuration $s \in S, a_1,a_2 \in A$, \IM{T_{state}((a_1,a_2),s) = t} if there is an edge from $s$ to $t$ whos label matches $(a_1,a_2)$.
	If there is no such edge then \IM{T_{state}((a_1,a_2),s) = \REJ}.

	\begin{figure}
		\centering
		\input{section__turing_machines/tm_ro2teq}
		\caption{Stage 1 - checking input is of correct form}
		\label{turing_machines:main_theorem:fig_stage1}
	\end{figure}

	To understand what is happening here, let us give more meaningful names to the states:
	\begin{align*}
		1 &\mapsto~\text{start of a new configuration} \\
		2 &\mapsto~\text{start of the tape} \\
		3 &\mapsto~\text{somewhere in the non-positive part of the tape} \\
		4 &\mapsto~\text{somewhere in the positive part of the tape} \\
		4^\prime &\mapsto~\text{previous symbol was bold and not the first one of the tape} \\
	\end{align*}
	The loop \IM{1 \to 2 \to 3 \to 4 \to 1} only goes through if both tapes are equal and their $0$-position is the start of a configuration as described above.
	Looping once will advance both tapes by exactly one configuration.
	$4^\prime$ is required to make sure that only the first and last symbol are bold.

	The second stage shifts both tapes by $-1$ until they hit an \EMP-symbol again, that is they are one symbol left of their original position.
	The third stage shifts both tapes by $1$ again.
	Thus the concatenation of the first three stages fulfills \IM{T^\infty(a,\INI) = (a,\ACC)} if $a$ is of correct form and is undefined or has a different state otherwise.
	Note that the first stage does not stop for $f(c)$, if $M$ does not stop for $c$. In particular, it does not accept $c$.

	Now that we know the input is the same on both tapes and of the form
	\begin{align*}
		c_0~|~c_1~|~...~|~c_k
	\end{align*}
	for some $c_i \in C(M)$ it remains to check that \IM{c_i = T(M)^i(c_0)} for all \IM{i \in \{1,...,k\}}.

	This is done by the fourth stage.
	Its set of states is
	\begin{align*}
		(\{-1,0,1,2,3,4,5\} \times A(M) \times S(M))~\cup~\{\INI,\ACC,\REJ\}
	\end{align*}
	This stage should be readonly again so $T_{write}$ is already defined.

	$T_{state}$ and $T_{direction}$ may be gathered from Figure \ref{turing_machines:main_theorem:fig_stage4}.

	\begin{figure}
		\centering
		\input{section__turing_machines/tm_ro2}
		\caption{Stage 4 - checking configurations are consecutive in a $T$-applying sense}
		\label{turing_machines:main_theorem:fig_stage4}
	\end{figure}

	This requires some explanation. First of all, think of the $A(M)$ and $S(M)$ parts of the states as ``memory'' as this is more descriptive of its function.
	An edge \IM{p \to q} with label
	\begin{align*}
		(a,s),\begin{matrix} x \\ y \end{matrix} \mapsto \begin{matrix} i \\ j \end{matrix}, (b,t)
	\end{align*}
	should be interpreted as
	\begin{align*}
		T_{state}((x,y),(p,a,s)) &:= (q,b,t) \\
		T_{direction}((x,y),(p,a,s)) &:= (i,j)
	\end{align*}
	$(a,s)$ may be omitted or any of $a$, $s$, $x$ and $y$ may be $*$. This means that the above definition may be applied, whatever the respective value is.
	If $(a,s)$ and $(b,t)$ are both omitted, assume \IM{(b,t) = (a,s)} and $a$ and $s$ may be any value again.
	If $b$ or $t$ is $*$, assume \IM{b = \EMP}~and \IM{t = \INI}~respectively for sake of disambiguity but consider the actual value not to be actually important.

\endproof
